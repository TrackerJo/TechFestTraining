import{j as t,F as b,a as r,r as l,c as C,R as P,n as y}from"./jsx-runtime.ebaa7bc8.js";import{getFirestore as w,query as x,collection as u,where as L,getDocs as I,doc as N,onSnapshot as v}from"https://www.gstatic.com/firebasejs/9.14.0/firebase-firestore.js";import{initializeApp as F}from"https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";function M({participant:s}){return t("div",{className:"Participant",children:t("label",{className:"ParticipantLabel",children:s.name})})}function E({shown:s,setSettings:e,setShown:i}){function n(c){e({timeLimit:document.getElementById("timeLimit").value,maxPlayers:document.getElementById("maxPlayers").value}),i("hidden")}return t(b,{children:r("div",{className:"Settings",id:s,children:[t("label",{className:"SettingsLabel",children:"Settings"}),t("br",{}),t("label",{htmlFor:"timeLimit",children:"Time Limit:"}),t("input",{type:"number",id:"timeLimit",className:"settingsInput"}),t("br",{}),t("label",{htmlFor:"maxPlayers",children:"Max Players:"}),t("input",{type:"number",id:"maxPlayers",className:"settingsInput"}),t("br",{}),t("button",{onClick:n,children:"Save Changes"})]})})}const j={apiKey:"AIzaSyChHNrFJEwMncaywKIAJgmpFVfl3Lwsh3s",authDomain:"techfesttraining.firebaseapp.com",projectId:"techfesttraining",storageBucket:"techfesttraining.appspot.com",messagingSenderId:"475746553872",appId:"1:475746553872:web:23b4de0a4627201b223a95"},k=F(j),g=w(k),B=s=>{const[e,i]=l.exports.useState([]);return l.exports.useEffect(()=>{let n=!1;return D(i,s,()=>n),()=>{n=!0}},[]),e},D=async(s,e,i)=>{let n=x(u(g,"MiniCompetitions"),L("Code","==",e)),c=await I(n);if(c.docs.length==0){alert("Competition doesn't exist");return}const m=c.docs[0].id,o=N(g,"MiniCompetitions",m),d=u(o,"Participants"),p=v(d,a=>{if(i()){p();return}a.docChanges().forEach(h=>{if(h.type==="added"){const f={id:h.doc.id,name:h.doc.data().Name};s(S=>[...S,f])}})})};C.createRoot(document.getElementById("root")).render(t(P.StrictMode,{children:t(R,{})}));function R(){const e=new URLSearchParams(window.location.search).get("compCode"),i=B(e),[n,c]=l.exports.useState({}),[m,o]=l.exports.useState("starting");function d(a){o("shown")}function p(a){c(a),y(e,a)}return r(b,{children:[r("div",{className:"CreateComp",children:[t("h1",{children:"Mini Competion"}),t("img",{src:"src/assets/settings.png",alt:"settings",className:"settingGear",onClick:d}),r("label",{children:["Competition Code: ",e]}),t("br",{}),r("label",{children:["Max Players: ",n.maxPlayers]}),t("br",{}),r("label",{children:["Time Limit: ",n.timeLimit," minutes"]}),t("br",{}),t("label",{children:"Participants:"}),t("br",{}),t("div",{className:"Participants",children:i.map(a=>t(M,{participant:a},a.id))}),r("div",{onClick:()=>alert(i.length),children:["# of Participants ",i.length]})]}),t(E,{shown:m,setSettings:p,setShown:o})]})}
